<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<title>Emacs Trick</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<meta name="title" content="Emacs Trick"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2012-11-20 00:23:52 CST"/>
<meta name="author" content="visayafan"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>


<script type="text/javascript" src="http://orgmode.org/mathjax/MathJax.js">
<!--/*--><![CDATA[/*><!--*/
    MathJax.Hub.Config({
        // Only one of the two following lines, depending on user settings
        // First allows browser-native MathML display, second forces HTML/CSS
        //  config: ["MMLorHTML.js"], jax: ["input/TeX"],
            jax: ["input/TeX", "output/HTML-CSS"],
        extensions: ["tex2jax.js","TeX/AMSmath.js","TeX/AMSsymbols.js",
                     "TeX/noUndefined.js"],
        tex2jax: {
            inlineMath: [ ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"], ["\\begin{displaymath}","\\end{displaymath}"] ],
            skipTags: ["script","noscript","style","textarea","pre","code"],
            ignoreClass: "tex2jax_ignore",
            processEscapes: false,
            processEnvironments: true,
            preview: "TeX"
        },
        showProcessingMessages: true,
        displayAlign: "center",
        displayIndent: "2em",

        "HTML-CSS": {
             scale: 100,
             availableFonts: ["STIX","TeX"],
             preferredFont: "TeX",
             webFont: "TeX",
             imageFont: "TeX",
             showMathMenu: true,
        },
        MMLorHTML: {
             prefer: {
                 MSIE:    "MML",
                 Firefox: "MML",
                 Opera:   "HTML",
                 other:   "HTML"
             }
        }
    });
/*]]>*///-->
</script>
</head>
<body>


<div id="content">
<h1 class="title">Emacs Trick</h1>


<!-- <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"> </script> -->
<link rel="stylesheet" type="text/css" href="../../Layout/CSS/bootstrap.min.css" />
<link rel="stylesheet" type="text/css" href="../../Layout/CSS/too_many_toc.css" />
<script src="../../Layout/JS/jquery_1.7.1.js"></script>
<script src="../../Layout/JS/bootstrap_old.js"></script>



<div id="table-of-contents">
<h2>目录</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1 用grep在文件中查找</a>
<ul>
<li><a href="#sec-1-1">1.1 lgrep</a></li>
<li><a href="#sec-1-2">1.2 grep</a></li>
</ul>
</li>
<li><a href="#sec-2">2 执行shell命令</a></li>
<li><a href="#sec-3">3 multiple-cursors</a></li>
<li><a href="#sec-4">4 ace-jump-mode</a></li>
<li><a href="#sec-5">5 align-regexp</a></li>
<li><a href="#sec-6">6 occur, re-builder, multi-occur, multi-occur-in-matching-buffers</a></li>
<li><a href="#sec-7">7 apropos</a></li>
<li><a href="#sec-8">8 follow-mode</a></li>
<li><a href="#sec-9">9 hexl-mode</a></li>
<li><a href="#sec-10">10 backup-by-copying-when-linked</a></li>
<li><a href="#sec-11">11 zap-to-char</a></li>
<li><a href="#sec-12">12 fill-paragraph</a></li>
<li><a href="#sec-13">13 <i>sudo::</i></a></li>
<li><a href="#sec-14">14 正则表达式</a></li>
<li><a href="#sec-15">15 eshell 别名/使用.bashrc中定义的别名</a></li>
<li><a href="#sec-16">16 解决org-mode example/src/quote上面多一行问题</a></li>
<li><a href="#sec-17">17 org-mode example/src过大</a></li>
<li><a href="#sec-18">18 org-mode中使用宏</a></li>
<li><a href="#sec-19">19 org-mode 中嵌入latex公式</a></li>
<li><a href="#sec-20">20 org-mode 中block中嵌入#+begin_example</a></li>
<li><a href="#sec-21">21 Ubuntu安装Emacs24.2及配置CEDET,ECB</a>
<ul>
<li><a href="#sec-21-1">21.1 ./configure前需要安装的信赖包</a></li>
<li><a href="#sec-21-2">21.2 配置cedet, ecb</a></li>
</ul>
</li>
<li><a href="#sec-22">22 dired-mode下批量修改文件名</a></li>
<li><a href="#sec-23">23 org-mode导出HTML目录显示“目录”而非默认的Table Of Content</a></li>
<li><a href="#sec-24">24 org-mode导出PDF目录显示“目录”而非默认的Contents</a></li>
<li><a href="#sec-25">25 org-mode的表格中输入|</a></li>
<li><a href="#sec-26">26 Emacs中使用输入法</a></li>
<li><a href="#sec-27">27 乱码</a></li>
<li><a href="#sec-28">28 Org Mode HTML导出时内部链接</a></li>
<li><a href="#sec-29">29 Yasnippet共享</a></li>
<li><a href="#sec-30">30 Yasnippet中使用elisp制定模板</a></li>
<li><a href="#sec-31">31 eshell命令大小写不敏感</a></li>
<li><a href="#sec-32">32 win7下find问题</a></li>
<li><a href="#sec-33">33 分享/评论</a></li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> 用grep在文件中查找</h2>
<div class="outline-text-2" id="text-1">

<p>  可以直接在grep buffer中修改文件。<br/>
</p>
</div>

<div id="outline-container-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> lgrep</h3>
<div class="outline-text-3" id="text-1-1">

<blockquote>

<p>(lgrep REGEXP &amp;optional FILES DIR CONFIRM)<br/>
</p>
</blockquote>


<p>
   查找指定目录DIR下指定模式文件FILES内容中符合REGEXP的文件，GREP buffer中n/p上下选择。<br/>
</p></div>

</div>

<div id="outline-container-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> grep</h3>
<div class="outline-text-3" id="text-1-2">

<p>   指定文件中查找<br/>
</p><blockquote>

<p>grep -nH -e "pattern" filename<br/>
</p>
</blockquote>


<p>
   其中H表输出中包含文件名，n表输出中包含行号，e表紧跟模式<br/>
</p></div>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> 执行shell命令</h2>
<div class="outline-text-2" id="text-2">

<p>  M-! 执行shell命令<br/>
  加前缀C-u执行命令的结果作用在buffer上。<br/>
  类似C-u M-|结果作用在region上<br/>
</p></div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> multiple-cursors</h2>
<div class="outline-text-2" id="text-3">

<blockquote>

<p>(global-set-key (kbd "C-S-c C-S-c") 'mc/edit-lines)<br/>
(global-set-key (kbd "C-S-c C-e") 'mc/edit-ends-of-lines)<br/>
(global-set-key (kbd "C-S-c C-a") 'mc/edit-beginnings-of-lines)<br/>
(global-set-key (kbd "C-&gt;") 'mc/mark-next-like-this)<br/>
(global-set-key (kbd "C-&lt;") 'mc/mark-previous-like-this)<br/>
(global-set-key (kbd "C-S-c C-&lt;") 'mc/mark-all-like-this)<br/>
(global-set-key (kbd "C-S-c C-&gt;") 'mc/mark-all-in-region)<br/>
</p>
</blockquote>


<p>
  先选中一个region，mc/edit-lines则对该region每行都有一个光标。mc/mark-next-like-this在与region内容相同的下一处加一光标。其它函数同理。<br/>
</p></div>

</div>

<div id="outline-container-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> ace-jump-mode</h2>
<div class="outline-text-2" id="text-4">




<pre class="src src-lisp">(<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">ace-jump-mode</span>)
(define-key global-map (kbd <span style="color: #8b2252;">"C-c SPC"</span>) 'ace-jump-mode)
</pre>

<p>
  ace-jump-mode共有3个子模式，char, word和line,默认是word，加上前缀C-u是char,两个前缀C-u C-u是line.<br/>
  word模式只匹配以输入字符开头的单词，line模式在非空行行首显示字符以便跳转到想要到的行。<br/>
</p></div>

</div>

<div id="outline-container-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> align-regexp</h2>
<div class="outline-text-2" id="text-5">

<p>  满足指定正则表达式的对齐，有时对整理注释比较有用。<br/>
  其它用法：<a href="http://emacswiki.org/emacs/AlignCommands">EmacsWiki</a><br/>
</p></div>

</div>

<div id="outline-container-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> occur, re-builder, multi-occur, multi-occur-in-matching-buffers</h2>
<div class="outline-text-2" id="text-6">

<p>  list-matching-lines是occur的别名，列出当前buffer中所有满足指定正则表达式的行。<br/>
  在进行正则替换行为确保万无一失，先检查一下，occur后输入regexp则会显示所有匹配内容。<br/>
  与occur另开一buffer显示匹配不同，re-builder实行动态匹配，即一边在RE-Builder中输入regexp一边匹配（此功能很不错）。<br/>
  在re-builder中C-c C-e可以进入子模式匹配 0―9分别代表子匹配模式，用q退出；还可以C-c TAB来选择正则表达式的语法，默认是read，此模式下需要的转义字符很多可以试下string模式。<br/>
  前面两个都是在当前buffer中匹配，而multi-occur/multi-occur-in-matching-buffers是在多个buffer中匹配<br/>
</p></div>

</div>

<div id="outline-container-7" class="outline-2">
<h2 id="sec-7"><span class="section-number-2">7</span> apropos</h2>
<div class="outline-text-2" id="text-7">

<p>  输入一个regexp，Emacs根据你所输入的regexp和当前buffer的内容构造出更多的regexp，也许Emacs构造的比你的更合适的。<br/>
</p></div>

</div>

<div id="outline-container-8" class="outline-2">
<h2 id="sec-8"><span class="section-number-2">8</span> follow-mode</h2>
<div class="outline-text-2" id="text-8">

<p>  启用该模式后，C-x 3分屏后，一个文件左右连接显示，适合阅读。<br/>
</p></div>

</div>

<div id="outline-container-9" class="outline-2">
<h2 id="sec-9"><span class="section-number-2">9</span> hexl-mode</h2>
<div class="outline-text-2" id="text-9">

<p>  编辑非文本文件。<br/>
</p></div>

</div>

<div id="outline-container-10" class="outline-2">
<h2 id="sec-10"><span class="section-number-2">10</span> backup-by-copying-when-linked</h2>
<div class="outline-text-2" id="text-10">

<p>  当文件存在硬链接时默认的备份会破坏这种链接（新建一个文件在新文件中修改，与原来链接文件的inode不同，故与原来链接文件存在链接关系的文件不会同步更新），可以修改当存在链接的时候,通过拷贝来备份，而不是写进一个新文件，故链接关系不会被破坏。<br/>
</p><blockquote>

<p>(setq backup-by-copying-when-linked t)<br/>
</p>
</blockquote>


<p>
  如果你在使用dropbox这种方法就非常有用，把想要保存在dropbox中的文件硬链接到dropbox目录下，既不占空间又能保持同步更新。<br/>
</p>
</div>

</div>

<div id="outline-container-11" class="outline-2">
<h2 id="sec-11"><span class="section-number-2">11</span> zap-to-char</h2>
<div class="outline-text-2" id="text-11">

<p>  默认绑定到M-z，删除当前位置到下一个输入字符之间的字符，有时候会很有用。<br/>
</p></div>

</div>

<div id="outline-container-12" class="outline-2">
<h2 id="sec-12"><span class="section-number-2">12</span> fill-paragraph</h2>
<div class="outline-text-2" id="text-12">

<p>  默认绑定到M-q，调整region,不满一行的由下一行补齐,默认宽度由fill-column变量决定。<br/>
</p></div>

</div>

<div id="outline-container-13" class="outline-2">
<h2 id="sec-13"><span class="section-number-2">13</span> <i>sudo::</i></h2>
<div class="outline-text-2" id="text-13">

<p>  如果你用普通用户权限打开emacs，则此时打开超级用户权限的文件是无法修改的，以超级用户重新打开一个emacs可行但考虑到emacs的启动速度，这绝对不是个好主意。<br/>
  解决办法：C-x C-f <i>sudo::</i> Enter 之后输入密码即可以超级用户权限打开一个文件。<br/>
</p></div>

</div>

<div id="outline-container-14" class="outline-2">
<h2 id="sec-14"><span class="section-number-2">14</span> 正则表达式</h2>
<div class="outline-text-2" id="text-14">

<p>  Emacs中正则表达式要注意group和重复所用的括号需要转义， <code>\(\)</code> , <code>\{3,6\}</code><br/>
  语法类包括：<br/>
</p>


<pre class="example">[:digit:]  a digit, same as [0-9]
[:upper:]  a letter in uppercase
[:space:]  a whitespace character, as defined by the syntax table
[:xdigit:] an hexadecimal digit
[:cntrl:]  a control character
[:ascii:]  an ascii character
\s-   whitespace character        \s/   character quote character
\sw   word constituent            \s$   paired delimiter         
\s_   symbol constituent          \s'   expression prefix        
\s.   punctuation character       \s&lt;   comment starter          
\s(   open delimiter character    \s&gt;   comment ender            
\s)   close delimiter character   \s!   generic comment delimiter
\s"   string quote character      \s|   generic string delimiter 
\s\   escape character            
</pre>

<p>
  用re-builder查询时要又重转义即转义字符要转义，即上面的要写成\\(\\), \\{3,6\\}，即要匹配一个字面上的\需要4个\，即\\<br/>
  re-builder中[:digit:]在写成[和]要写2次.<br/>
</p>


<pre class="example">"\\(\\+\\|-\\)?[0-9]+\\(\\.[0-9]+\\)?"        表示一个数
"[[:digit:]]\\{3\\}"                          表示连续3个数字
</pre>


</div>

</div>

<div id="outline-container-15" class="outline-2">
<h2 id="sec-15"><span class="section-number-2">15</span> eshell 别名/使用.bashrc中定义的别名</h2>
<div class="outline-text-2" id="text-15">

<p>  Eshell中 find-file filename即可打开文件，等价于C-x C-f filename<br/>
  可以定义别名 alias emacs 'find-file $1'，这样在eshell中emacs filename即可打开文件<br/>
</p>
<p>
  我在.bashrc中定义了许多别名，eshell的别名默认保存在 <code>~/.eshell/alias</code> 中，由变量 <code>eshell-aliases-file</code> 确定，为在方便备份我把它必为 <code>~/.emacs.d/eshell/alias</code> ，为了使eshell可以使用这些别名，可以使用下面的命令把所有在shell中可用的别名加到eshell中。<br/>
</p>


<pre class="example">cd ~/.emacs.d/eshell &amp;&amp; cat alias &gt; tmp &amp;&amp; echo -e "\n" &gt;&gt; tmp &amp;&amp; alias | sed -E "s/^alias ([^=]+)='(.*)'$/alias \1 \2/g; s/'\\\''/'/g;" &gt;&gt; tmp &amp;&amp; sort -u tmp &gt; alias &amp;&amp; rm -f tmp &amp;&amp; sed -i -e '/clc/d' -e '/^$/d'  alias &amp;&amp; cd - &gt;/dev/null
</pre>

<p>
  一个很简单的正则替换，其中最后删掉clc行是因为我在shell下用clc充当clear的别名，而此命令在eshell下无效且影响我定义的另一个名为clc的eshell下的孙：<br/>
</p>


<pre class="src src-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">clc &#28165;&#23631;,&#22312;eshell&#20013;&#36755;&#20837;&#21629;&#20196;&#32780;&#38750;M-x clc</span>
(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">eshell/clc</span>()
  <span style="color: #8b2252;">"to clear the eshell buffer."</span>
  (interactive)
  (<span style="color: #a020f0;">let</span> ((inhibit-read-only t))
    (erase-buffer)))
</pre>


<p>  <br/>
</p></div>

</div>

<div id="outline-container-16" class="outline-2">
<h2 id="sec-16"><span class="section-number-2">16</span> 解决org-mode example/src/quote上面多一行问题</h2>
<div class="outline-text-2" id="text-16">

<p>  不知道是不是org-mode的bug？如下所示的代码<br/>
</p>


<pre class="src src-org">abc
cef
<span style="color: #b22222;">#+begin_example</span>
<span style="color: #7f7f7f;">hello</span>
<span style="color: #b22222;">#+end_example  </span>
</pre>

<p>
  经编译后生成：<br/>
</p>


<pre class="example">&lt;p&gt;  abc&lt;br/&gt;
  cef&lt;br/&gt;
&lt;/p&gt;
&lt;p&gt;&lt;br&gt;
&lt;pre class="example"&gt;hello
&lt;/pre&gt;
&lt;/p&gt;
</pre>

<p>
  但浏览器解析是这样解析的：<br/>
</p>


<pre class="example">&lt;p&gt;  abc&lt;br/&gt;
  cef&lt;br/&gt;
&lt;/p&gt;
&lt;p&gt;&lt;br&gt;&lt;/p&gt;
&lt;pre class="example"&gt;hello
&lt;/pre&gt;
</pre>

<p>
  这样就会在cef和hello之间多出一行。<br/>
  分析lisp/org-html.el代码发现原因在:<br/>
</p>


<pre class="src src-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Check if the line break needs to be conserved</span>
(<span style="color: #a020f0;">cond</span>
 ((string-match <span style="color: #8b2252;">"\\\\\\\\[ \t]*$"</span> line)
  (setq line (replace-match <span style="color: #8b2252;">"&lt;br/&gt;"</span> t t line)))
 (org-export-preserve-breaks
  (setq line (concat line <span style="color: #8b2252;">"&lt;br/&gt;"</span>))
  ))
</pre>

<p>
  不管line是否为空都会给line后面加上&lt;br/&gt;，而实际上当Line为空时没有必要加上&lt;br/&gt;，于是可以修改:<br/>
</p>


<pre class="src src-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Check if the line break needs to be conserved</span>
(<span style="color: #a020f0;">cond</span>
 ((string-match <span style="color: #8b2252;">"\\\\\\\\[ \t]*$"</span> line)
  (setq line (replace-match <span style="color: #8b2252;">"&lt;br/&gt;"</span> t t line)))
 (org-export-preserve-breaks
  (<span style="color: #a020f0;">if</span> (not (string= line <span style="color: #8b2252;">""</span>))
      (setq line (concat line <span style="color: #8b2252;">"&lt;br/&gt;"</span>)))
  ))
</pre>

<p>
  这样便解决了多一行的问题。<br/>
</p></div>

</div>

<div id="outline-container-17" class="outline-2">
<h2 id="sec-17"><span class="section-number-2">17</span> org-mode example/src过大</h2>
<div class="outline-text-2" id="text-17">

<p>  当在#+begin_example #+end_example或者#+begin_src #+end_src环境中内容过多时会占用大量空间，一个解决办法是加上 <code>-t</code> 选项并配合 <code>-h height -w width</code> 选项来指定高宽，使它成为有滚动条的区域。但好像无法使用语法高亮。<br/>
</p></div>

</div>

<div id="outline-container-18" class="outline-2">
<h2 id="sec-18"><span class="section-number-2">18</span> org-mode中使用宏</h2>
<div class="outline-text-2" id="text-18">

<p>  在文章的开始定义宏，格式为 #+macro: macro_name macro_content_with_$1_arg1_$2_arg2_&hellip;<br/>
  在文章中使用宏 {{{macro_name(args)}}}<br/>
  其中org-mode内置的宏包括<br/>
</p>


<pre class="example">Emacs Trick
visayafan
format 其中format格式必须可以被函数 =format-time-string= 识别，常用的包括 %Y-%m-%d-%H-%M-%S 年月日时分秒
%x 格式为： 10/29/2012 
%X 格式为： 11:46:33 AM 
%c 格式为： Mon 29 Oct 2012 11:46:33 AM CST 
%D 格式为： 10/29/12 
%R 格式为： 11:46 
%T 格式为： 11:46:33 
%r 格式为： 11:46:33 AM
还有其它的org中的关键字
</pre>

</div>

</div>

<div id="outline-container-19" class="outline-2">
<h2 id="sec-19"><span class="section-number-2">19</span> org-mode 中嵌入latex公式</h2>
<div class="outline-text-2" id="text-19">




<pre class="example">$$ \(\)表行内，$$ $$ \[ \] 表行间
</pre>


<pre class="example">If $a^2=b$ and \( b=2 \), then the solution must be
either $$ a=+\sqrt{2} $$ or \[ a=-\sqrt{2} \].
</pre>

</div>

</div>

<div id="outline-container-20" class="outline-2">
<h2 id="sec-20"><span class="section-number-2">20</span> org-mode 中block中嵌入#+begin_example</h2>
<div class="outline-text-2" id="text-20">

<pre class="example">
#+begin_example
#+begin_example
这种情况导出的不会包含#+begin_example,因为把想要字面导出的#+begin_example当成了example环境
#+end_example
#+end_example
</pre>

<p>  应该这样写<br/>
</p><pre class="example">
#+begin_src org
#+begin_example
这样就对了,在这种情况下可以快捷键C-c ' 来进入源码编辑模式
#+end_example
#+end_src
</pre>

<p>  也可以在第行前面加上:空格 来表示字面解析：<br/>
</p>


<pre class="src src-org"><span style="color: #7f7f7f;">: #+begin_example</span>
<span style="color: #7f7f7f;">: &#36825;&#26679;&#23601;&#23545;&#20102;</span>
<span style="color: #7f7f7f;">: #+end_example</span>
</pre>

</div>

</div>

<div id="outline-container-21" class="outline-2">
<h2 id="sec-21"><span class="section-number-2">21</span> Ubuntu安装Emacs24.2及配置CEDET,ECB</h2>
<div class="outline-text-2" id="text-21">


</div>

<div id="outline-container-21-1" class="outline-3">
<h3 id="sec-21-1"><span class="section-number-3">21.1</span> ./configure前需要安装的信赖包</h3>
<div class="outline-text-3" id="text-21-1">




<pre class="example">sudo apt-get install libgtk2.0-dev
sudo apt-get install libxpm-dev  
sudo apt-get install libjpeg62-dev  
sudo apt-get install libgif-dev  
sudo apt-get install libtiff4-dev  
sudo apt-get install libncurses5-dev
</pre>

</div>

</div>

<div id="outline-container-21-2" class="outline-3">
<h3 id="sec-21-2"><span class="section-number-3">21.2</span> 配置cedet, ecb</h3>
<div class="outline-text-3" id="text-21-2">

<p>   要想使用cedet1.1和ecb2.4必须修改ecb2.4/ecb-upgrade.el中：<br/>
</p><ol>
<li>注释 ecb-check-requirements函数中：<br/>
</li>
</ol>




<pre class="src src-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">check if vedet-version is correct</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">(when (or (not (boundp 'cedet-version))</span>
<span style="color: #b22222;">;;           </span><span style="color: #b22222;">(ecb-package-version-list&lt;</span>
<span style="color: #b22222;">;;            </span><span style="color: #b22222;">(ecb-package-version-str2list cedet-version)</span>
<span style="color: #b22222;">;;            </span><span style="color: #b22222;">ecb-required-cedet-version-min)</span>
<span style="color: #b22222;">;;           </span><span style="color: #b22222;">(ecb-package-version-list&lt;</span>
<span style="color: #b22222;">;;            </span><span style="color: #b22222;">ecb-required-cedet-version-max</span>
<span style="color: #b22222;">;;            </span><span style="color: #b22222;">(ecb-package-version-str2list cedet-version)))</span>
<span style="color: #b22222;">;;   </span><span style="color: #b22222;">(setq version-error (concat "cedet ["</span>
<span style="color: #b22222;">;;                               </span><span style="color: #b22222;">cedet-required-version-str-min</span>
<span style="color: #b22222;">;;                               </span><span style="color: #b22222;">", "</span>
<span style="color: #b22222;">;;                               </span><span style="color: #b22222;">cedet-required-version-str-max</span>
<span style="color: #b22222;">;;                               </span><span style="color: #b22222;">"]")))</span>
</pre>

<ol>
<li>修改：<br/>
</li>
</ol>




<pre class="src src-lisp">(<span style="color: #a020f0;">defconst</span> <span style="color: #a0522d;">ecb-required-cedet-version-max</span> '(1 0 4 9))
&#20026;
(<span style="color: #a020f0;">defconst</span> <span style="color: #a0522d;">ecb-required-cedet-version-max</span> '(1 1 4 9))
</pre>

<p>
   之后在ecb-2.4目录下 make CEDET=../cedet-1.1<br/>
</p></div>
</div>

</div>

<div id="outline-container-22" class="outline-2">
<h2 id="sec-22"><span class="section-number-2">22</span> dired-mode下批量修改文件名</h2>
<div class="outline-text-2" id="text-22">

<p>  C-x d打开一个目录后， <code>M-x wdired-change-to-wdired-mode</code> 进入可编辑模式，这样可以批量给文件改名。<br/>
<link rel="stylesheet" href="../../Layout/CSS/jquery.lightbox-0.5.css" type="text/css" media="screen" />
<script type="text/javascript" src="../../Layout/JS/jquery.lightbox-0.5.js"></script>
<center> <a class="lightbox" href="./image/emacs-dired.png"> <img class="lightbox " title="jQuery.lightbox" src="./image/emacs-dired.png" width="400"> </a> </center>
d<script type="text/javascript"> $(function() {$('a.lightbox').lightBox();}); </script>
</p></div>

</div>

<div id="outline-container-23" class="outline-2">
<h2 id="sec-23"><span class="section-number-2">23</span> org-mode导出HTML目录显示“目录”而非默认的Table Of Content</h2>
<div class="outline-text-2" id="text-23">

<p>  <code>M-x customize-variable ENTER org-export-language-setup</code> 在最后ins插入新的List:<br/>
<center>
<img src="./image/中文目录.png"  alt="./image/中文目录.png" />  <br/>
</center>
  再 <code>M-x customize-variable ENTER org-export-default-language</code> 改成 zh-CN<br/>
</p></div>

</div>

<div id="outline-container-24" class="outline-2">
<h2 id="sec-24"><span class="section-number-2">24</span> org-mode导出PDF目录显示“目录”而非默认的Contents</h2>
<div class="outline-text-2" id="text-24">

<p>  在 <code>org-export-latex-classes</code> 中加上 <code>\\renewcommand\\contentsname{目录}</code><br/>
</p></div>

</div>

<div id="outline-container-25" class="outline-2">
<h2 id="sec-25"><span class="section-number-2">25</span> org-mode的表格中输入|</h2>
<div class="outline-text-2" id="text-25">

<p>  两种办法：<br/>
</p><ol>
<li><code>\vert{}</code> 使用 \(\LaTeX\)<br/>
</li>
<li>快捷键 <code>C-c C-x \</code><br/>
</li>
</ol>

</div>

</div>

<div id="outline-container-26" class="outline-2">
<h2 id="sec-26"><span class="section-number-2">26</span> Emacs中使用输入法</h2>
<div class="outline-text-2" id="text-26">

<p>  可以 <code>M-x customize-variable RET default-input-method</code> 来指定默认的输入法，例如 <code>chinese-pinyin</code> 。<br/>
  默认是 <code>C-\</code> 来调用。<br/>
  下面是五笔的配置，参考<a href="http://daiyuwen.freeshell.org/gb/wubi/wubi.html">http://daiyuwen.freeshell.org/gb/wubi/wubi.html</a><br/>
  这里设置的 <code>M-Space</code> 来调用。<br/>
</p>


<pre class="src src-lisp">(add-to-list 'load-path <span style="color: #8b2252;">"~/.emacs.d/wubi"</span>)
(<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">wubi</span>)
(wubi-load-local-phrases) <span style="color: #b22222;">; </span><span style="color: #b22222;">add user's Wubi phrases</span>
(register-input-method
 <span style="color: #8b2252;">"chinese-wubi"</span> <span style="color: #8b2252;">"Chinese-GB"</span> 'quail-use-package
 <span style="color: #8b2252;">"WuBi"</span> <span style="color: #8b2252;">"WuBi"</span>
 <span style="color: #8b2252;">"wubi"</span>)
(setq default-input-method <span style="color: #8b2252;">"chinese-wubi"</span>)
(global-set-key [?\M- ] 'toggle-input-method)
</pre>

<p>
  这样不管机器上有没有中文输入法，只要有Emacs就可以工作。<br/>
</p></div>

</div>

<div id="outline-container-27" class="outline-2">
<h2 id="sec-27"><span class="section-number-2">27</span> 乱码</h2>
<div class="outline-text-2" id="text-27">

<p>  可以 <code>C-x RET r TAB</code> 来选择编码。<br/>
  中文乱码可以在.emacs中加入以下代码：<br/>
</p>


<pre class="src src-lisp">(prefer-coding-system 'utf-8)
(prefer-coding-system 'gb18030)
</pre>

<p>
  或：<br/>
</p>


<pre class="src src-lisp">(prefer-coding-system 'utf-8)
(prefer-coding-system 'chinese-gbk)
</pre>

</div>

</div>

<div id="outline-container-28" class="outline-2">
<h2 id="sec-28"><span class="section-number-2">28</span> Org Mode HTML导出时内部链接</h2>
<div class="outline-text-2" id="text-28">

<p>  在一篇文章中建立内部链接很简单，添加anchor，<br/>
</p>


<pre class="example">#&lt;&lt;anchor&gt;&gt;
</pre>

<p>
  在想要链接到上面的地主添加链接即可:<br/>
</p>


<pre class="example">[[anchor]]
</pre>

</div>

</div>

<div id="outline-container-29" class="outline-2">
<h2 id="sec-29"><span class="section-number-2">29</span> Yasnippet共享</h2>
<div class="outline-text-2" id="text-29">

<p>  在c mode和c++ mode下都可以使用cc mode里面的yasnippet，其方法是在 snippet/c-mode和snippet/c++-mode目录下均存在.yas-parents其内容均为cc-mode。<br/>
这样便省去了重复定制yasnippet。<br/>
</p></div>

</div>

<div id="outline-container-30" class="outline-2">
<h2 id="sec-30"><span class="section-number-2">30</span> Yasnippet中使用elisp制定模板</h2>
<div class="outline-text-2" id="text-30">

<p>  yasnippet模板中``之间的elisp语句会被编译后替代原来代码，我每次写文章时打开一个org mode的新buffer时，首先要在文件头部包含一些相同的内容，例如：#+include "../../template.org" 其中../../template.org包含一些CSS控制文件，这些内容是固定不变的，所以直接写在yasnippet模板里就可以，但有些东西，例如标题，是与当前文件有关的，此时可以用elisp来实现动态插入标题：<br/>
</p><pre class="example">
# -*- mode: snippet -*-
# name: template
# --
#+OPTIONS: ^:{} _:{} num:t toc:t \n:t
#+include "../../template.org"
#+title:`(replace-regexp-in-string "\.org" "" (file-name-nondirectory (buffer-file-name (window-buffer (minibuffer-selected-window)))))`$0
</pre>

<p>  还可以写得更复杂一些，例如：我在文章最下面的查看Org源码button：<br/>
</p><pre class="example">
#+html:&lt;a class="btn btn-primary" href="`(funcall (lambda (filepath)
           (if (eq system-type 'gnu/linux)
               (if (string-match "Dropbox" filepath)
                   (replace-regexp-in-string "/home/visayafan/Dropbox/visayafan\.github\.com" "https://raw.github.com/visayafan/visayafan.github.com/master" filepath)
                 (replace-regexp-in-string "/home/visayafan/visayafan\.github\.com" "https://raw.github.com/visayafan/visayafan.github.com/master" filepath))
             (replace-regexp-in-string "D:/Dropbox/visayafan\.github\.com" "https://raw.github.com/visayafan/visayafan.github.com/master" filepath)
             ))
         (buffer-file-name (window-buffer (minibuffer-selected-window))))`"&gt;查看Org源码&lt;/a&gt;
</pre>

<p>  由于我在linux和windows下博客路径不同，所以其中有个判断语句；然后替换掉路径中的部分内容使其成为github上的链接。<br/>
</p></div>

</div>

<div id="outline-container-31" class="outline-2">
<h2 id="sec-31"><span class="section-number-2">31</span> eshell命令大小写不敏感</h2>
<div class="outline-text-2" id="text-31">

<p>  需要修改变量eshell-glob-case-insensitive为nil，可以用customize-variable来修改，也可以在配置文件中加上：<br/>
</p>


<pre class="src src-lisp">(custom-set-variables
 '(eshell-glob-case-insensitive nil)
)
  &#21478;&#22806;Win&#19979;&#22312;Eshell&#20013;&#36755;&#20837;&#30446;&#24405;&#22238;&#36710;&#33258;&#21160;cd&#12290;
</pre>

</div>

</div>

<div id="outline-container-32" class="outline-2">
<h2 id="sec-32"><span class="section-number-2">32</span> win7下find问题</h2>
<div class="outline-text-2" id="text-32">

<p>  尽管安装了GNUWin32但使用rgrep时仍然出问题，其实问题在于Win7自带的find命令，把system32下的find.exe改个名即可<br/>
</p></div>

</div>

<div id="outline-container-33" class="outline-2">
<h2 id="sec-33"><span class="section-number-2">33</span> 分享/评论</h2>
<div class="outline-text-2" id="text-33">


<a class="btn btn-primary" href="https://raw.github.com/visayafan/visayafan.github.com/master/Others/o/Emacs.org">View Org Source</a>
<a class="bshareDiv" href="http://www.bshare.cn/share">分享按钮</a><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#uuid=&amp;style=10&amp;bgcolor=Blue"></script>
<br/>
<script src="../../Layout/JS/disqus-comment.js"></script>
<div id="disqus_thread">
</div>

</div>
</div>
</div>

</body>
</html>
